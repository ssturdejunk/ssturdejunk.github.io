<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Working with JSON Activity | Lesson 09 | CIT 230 Assignment Portal | Stephen Sturdevant | BYU-Idaho</title>
        <meta name="description" content="Assignment 09 JSON activity from reading assignment for Stephen Sturdevant in CIT 230: Web Frontend Development at Brigham Young University-Idaho.">
        <link href="https://fonts.googleapis.com/css?family=Faster+One" rel="stylesheet">
        <link rel="stylesheet" href="styles/normalize.css">
        <link rel="stylesheet" href="styles/jsonexample.css">
        <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    </head>

    <body>
        <nav>
            <ul id="homeNave">
                <li><a href="https://ssturdejunk.github.io/">Assignments Home</a></li>
            </ul>
        </nav>
        <main>
            <h2>Working with JSON Activity</h2>

            <p>This page is based on work done following the instructions in <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON">Mozilla's Working with JSON example</a></p>

            <header>
            </header>
            <section>

            </section>

            <script>
                var header = document.querySelector('header');
                var section = document.querySelector('section');
                var requestURL = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';
                var request = new XMLHttpRequest();
                request.open('GET', requestURL);
                request.responseType = 'json';
                request.send();


                request.onload = function() {
                    var superHeroes = request.response;
                    populateHeader(superHeroes);
                    showHeroes(superHeroes);
                }


                function populateHeader(jsonObj) {
                    var myH1 = document.createElement('h1');
                    myH1.textContent = jsonObj['squadName'];
                    header.appendChild(myH1);

                    var myPara = document.createElement('p');
                    myPara.textContent = 'Hometown: ' + jsonObj['homeTown'] + ' // Formed: ' + jsonObj['formed'];
                    header.appendChild(myPara);
                }

                function showHeroes(jsonObj) {
                    var heroes = jsonObj['members'];

                    for (var i = 0; i < heroes.length; i++) {
                        var myArticle = document.createElement('article');
                        var myH2 = document.createElement('h2');
                        var myPara1 = document.createElement('p');
                        var myPara2 = document.createElement('p');
                        var myPara3 = document.createElement('p');
                        var myList = document.createElement('ul');

                        myH2.textContent = heroes[i].name;
                        myPara1.textContent = 'Secret identity: ' + heroes[i].secretIdentity;
                        myPara2.textContent = 'Age: ' + heroes[i].age;
                        myPara3.textContent = 'Superpowers:';

                        var superPowers = heroes[i].powers;
                        for (var j = 0; j < superPowers.length; j++) {
                            var listItem = document.createElement('li');
                            listItem.textContent = superPowers[j];
                            myList.appendChild(listItem);
                        }

                        myArticle.appendChild(myH2);
                        myArticle.appendChild(myPara1);
                        myArticle.appendChild(myPara2);
                        myArticle.appendChild(myPara3);
                        myArticle.appendChild(myList);

                        section.appendChild(myArticle);
                    }
                }

            </script>



        </main>
        <footer>
            <small>&copy; Copyright 2018, Stephen Sturdevant, Texas, USA <br>
                <a href="http://www.byui.edu/online">BYU-Idaho Online Learning</a></small>
        </footer>
    </body>




</html>
